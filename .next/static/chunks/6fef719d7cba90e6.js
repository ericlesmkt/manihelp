(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51804,e=>{"use strict";let a=(0,e.i(75254).default)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);e.s(["CalendarCheck",()=>a],51804)},31713,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566),s=e.i(53210),n=e.i(75254);let i=(0,n.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),l=(0,n.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var o=e.i(84614),c=e.i(43432),d=e.i(29377);let m=(0,n.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var u=e.i(51804);function x(){let e=(0,r.useRouter)(),[n,x]=(0,t.useState)("login"),[p,h]=(0,t.useState)(""),[g,f]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[j,k]=(0,t.useState)(""),[N,v]=(0,t.useState)("client"),[w,C]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null),T=async a=>{a.preventDefault(),C(!0),E(null);try{if("login"===n){let{error:a}=await s.supabase.auth.signInWithPassword({email:p,password:g});if(a)throw Error(a.message);e.refresh()}else{let{error:e}=await s.supabase.auth.signUp({email:p,password:g,options:{data:{full_name:y,phone:j,user_role:N}}});if(e)throw Error(e.message);"client"===N?alert("Verifique seu e-mail para confirmar seu cadastro. Você será redirecionado para a página inicial."):alert("Cadastro de Manicure realizado! Por favor, faça o login."),x("login")}}catch(e){console.error("Erro de autenticação:",e),E(e.message||"Ocorreu um erro inesperado. Tente novamente.")}finally{C(!1)}},q=w?(0,a.jsx)(d.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}):null;return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 font-inter",children:(0,a.jsxs)("div",{className:"w-full max-w-sm bg-white p-8 rounded-xl shadow-2xl space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-mani-pink-600 flex items-center justify-center",children:(0,a.jsx)(u.CalendarCheck,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"ManiHelp"}),(0,a.jsx)("p",{className:"text-gray-500",children:"login"===n?"Acesse sua conta":"Crie sua conta"})]}),S&&(0,a.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded-lg text-sm",children:S}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-4",children:["signup"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Nome Completo"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Seu Nome Completo",value:y,onChange:e=>b(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Telefone / WhatsApp"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Phone,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"tel",placeholder:"Telefone / WhatsApp",value:j,onChange:e=>k(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Conta"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:`flex items-center space-x-2 p-3 rounded-lg border cursor-pointer w-1/2 transition ${"client"===N?"border-mani-pink-500 bg-mani-pink-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[(0,a.jsx)("input",{type:"radio",name:"role",value:"client",checked:"client"===N,onChange:()=>v("client"),className:"text-mani-pink-600 focus:ring-mani-pink-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Cliente"})]}),(0,a.jsxs)("label",{className:`flex items-center space-x-2 p-3 rounded-lg border cursor-pointer w-1/2 transition ${"manicure"===N?"border-mani-pink-500 bg-mani-pink-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[(0,a.jsx)("input",{type:"radio",name:"role",value:"manicure",checked:"manicure"===N,onChange:()=>v("manicure"),className:"text-mani-pink-600 focus:ring-mani-pink-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Manicure"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"E-mail"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",placeholder:"E-mail",value:p,onChange:e=>h(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Senha"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"password",placeholder:"Senha",value:g,onChange:e=>f(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,a.jsxs)("button",{type:"submit",disabled:w,className:"w-full flex items-center justify-center bg-mani-pink-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-mani-pink-700 transition duration-300",children:[q,"login"===n?"Entrar":"Cadastrar"]})]}),(0,a.jsx)("div",{className:"text-center text-sm",children:"login"===n?(0,a.jsxs)("p",{className:"text-gray-600",children:["Não tem conta? "," ",(0,a.jsx)("button",{type:"button",onClick:()=>x("signup"),className:"text-mani-pink-600 font-medium hover:text-mani-pink-800",children:"Cadastre-se aqui"})]}):(0,a.jsx)("p",{className:"text-gray-600",children:(0,a.jsxs)("button",{type:"button",onClick:()=>x("login"),className:"text-mani-pink-600 font-medium hover:text-mani-pink-800 flex items-center mx-auto",children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-1"}),"Voltar para Login"]})})})]})})}function p(){let e=(0,r.useRouter)(),[n,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let{data:{subscription:e}}=s.supabase.auth.onAuthStateChange((e,a)=>{l(a)});return async function(){let{data:{session:e}}=await s.supabase.auth.getSession();l(e)}(),()=>e.unsubscribe()},[e]);let l=async a=>{if(!a)return void i(!1);let{data:t,error:r}=await s.supabase.from("profiles").select("role").eq("id",a.user.id).single();if(r||!t){console.error("Erro ao carregar perfil, mostrando tela de login.",r),i(!1),await s.supabase.auth.signOut();return}"manicure"===t.role?e.replace("/dashboard"):"client"===t.role&&e.replace("/client-dashboard"),i(!1)};return n?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,a.jsx)(d.Loader2,{className:"w-8 h-8 text-mani-pink-600 animate-spin"}),(0,a.jsx)("p",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):(0,a.jsx)(x,{})}e.s(["default",()=>p],31713)}]);