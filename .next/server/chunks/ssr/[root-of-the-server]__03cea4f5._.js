module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},46842,63519,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>c],46842);let d=(0,b.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>d],63519)},27999,a=>{"use strict";let b=(0,a.i(70106).default)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);a.s(["CalendarCheck",()=>b],27999)},60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(7291),f=a.i(70106);let g=(0,f.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var h=a.i(43108),i=a.i(46842),j=a.i(63519),k=a.i(26017);let l=(0,f.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=a.i(27999);function n(){let a=(0,d.useRouter)(),[f,n]=(0,c.useState)("login"),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)("client"),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),C=async b=>{b.preventDefault(),z(!0),B(null);try{if("login"===f){let{error:b}=await e.supabase.auth.signInWithPassword({email:o,password:q});if(b)throw Error(b.message);a.refresh()}else{let{error:a}=await e.supabase.auth.signUp({email:o,password:q,options:{data:{full_name:s,phone:u,user_role:w}}});if(a)throw Error(a.message);"client"===w?alert("Verifique seu e-mail para confirmar seu cadastro. Você será redirecionado para a página inicial."):alert("Cadastro de Manicure realizado! Por favor, faça o login."),n("login")}}catch(a){console.error("Erro de autenticação:",a),B(a.message||"Ocorreu um erro inesperado. Tente novamente.")}finally{z(!1)}},D=y?(0,b.jsx)(k.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}):null;return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 font-inter",children:(0,b.jsxs)("div",{className:"w-full max-w-sm bg-white p-8 rounded-xl shadow-2xl space-y-6",children:[(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-mani-pink-600 flex items-center justify-center",children:(0,b.jsx)(m.CalendarCheck,{className:"w-8 h-8 text-white"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"ManiHelp"}),(0,b.jsx)("p",{className:"text-gray-500",children:"login"===f?"Acesse sua conta":"Crie sua conta"})]}),A&&(0,b.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded-lg text-sm",children:A}),(0,b.jsxs)("form",{onSubmit:C,className:"space-y-4",children:["signup"===f&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Nome Completo"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Seu Nome Completo",value:s,onChange:a=>t(a.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Telefone / WhatsApp"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Phone,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"tel",placeholder:"Telefone / WhatsApp",value:u,onChange:a=>v(a.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Conta"}),(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsxs)("label",{className:`flex items-center space-x-2 p-3 rounded-lg border cursor-pointer w-1/2 transition ${"client"===w?"border-mani-pink-500 bg-mani-pink-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[(0,b.jsx)("input",{type:"radio",name:"role",value:"client",checked:"client"===w,onChange:()=>x("client"),className:"text-mani-pink-600 focus:ring-mani-pink-500"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Cliente"})]}),(0,b.jsxs)("label",{className:`flex items-center space-x-2 p-3 rounded-lg border cursor-pointer w-1/2 transition ${"manicure"===w?"border-mani-pink-500 bg-mani-pink-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[(0,b.jsx)("input",{type:"radio",name:"role",value:"manicure",checked:"manicure"===w,onChange:()=>x("manicure"),className:"text-mani-pink-600 focus:ring-mani-pink-500"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Manicure"})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"E-mail"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"email",placeholder:"E-mail",value:o,onChange:a=>p(a.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 sr-only",children:"Senha"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"password",placeholder:"Senha",value:q,onChange:a=>r(a.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500"})]})]}),(0,b.jsxs)("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center bg-mani-pink-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-mani-pink-700 transition duration-300",children:[D,"login"===f?"Entrar":"Cadastrar"]})]}),(0,b.jsx)("div",{className:"text-center text-sm",children:"login"===f?(0,b.jsxs)("p",{className:"text-gray-600",children:["Não tem conta? "," ",(0,b.jsx)("button",{type:"button",onClick:()=>n("signup"),className:"text-mani-pink-600 font-medium hover:text-mani-pink-800",children:"Cadastre-se aqui"})]}):(0,b.jsx)("p",{className:"text-gray-600",children:(0,b.jsxs)("button",{type:"button",onClick:()=>n("login"),className:"text-mani-pink-600 font-medium hover:text-mani-pink-800 flex items-center mx-auto",children:[(0,b.jsx)(l,{className:"w-4 h-4 mr-1"}),"Voltar para Login"]})})})]})})}function o(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!0);(0,c.useEffect)(()=>{let{data:{subscription:a}}=e.supabase.auth.onAuthStateChange((a,b)=>{h(b)});return async function(){let{data:{session:a}}=await e.supabase.auth.getSession();h(a)}(),()=>a.unsubscribe()},[a]);let h=async b=>{if(!b)return void g(!1);let{data:c,error:d}=await e.supabase.from("profiles").select("role").eq("id",b.user.id).single();if(d||!c){console.error("Erro ao carregar perfil, mostrando tela de login.",d),g(!1),await e.supabase.auth.signOut();return}"manicure"===c.role?a.replace("/dashboard"):"client"===c.role&&a.replace("/client-dashboard"),g(!1)};return f?(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,b.jsx)(k.Loader2,{className:"w-8 h-8 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):(0,b.jsx)(n,{})}a.s(["default",()=>o],60350)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__03cea4f5._.js.map