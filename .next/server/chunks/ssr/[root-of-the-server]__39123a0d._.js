module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},5784,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},55225,23312,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>c],55225);let d=(0,b.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>d],23312)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);a.s(["Calendar",()=>b],41675)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},4707,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(7291),f=a.i(26017),g=a.i(41675),h=a.i(41710),i=a.i(15618);let j=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var k=a.i(60246),l=a.i(20005),m=a.i(5784),n=a.i(55225),o=a.i(21161),p=a.i(23312),q=a.i(43108);let r=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];function s(){let a=(0,d.useRouter)(),[g,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[s,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({day:1,start:"09:00",end:"18:00"}),x=(0,c.useCallback)(async a=>{u(null);try{let{data:b,error:c}=await e.supabase.from("schedules").select("*").eq("manicure_id",a).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0});if(c)throw Error(c.message);m(b)}catch(a){u("Falha ao carregar horários: "+a.message),console.error(a)}finally{o(!1)}},[]);(0,c.useEffect)(()=>{!async function(){let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.replace("/");let{data:c,error:d}=await e.supabase.from("profiles").select("id, name, role").eq("id",b.id).single();if(d||c?.role!=="manicure"){await e.supabase.auth.signOut(),a.replace("/");return}k({id:c.id,name:c.name}),x(b.id)}();let{data:{subscription:b}}=e.supabase.auth.onAuthStateChange(b=>{"SIGNED_OUT"===b&&a.replace("/")});return()=>b.unsubscribe()},[a,x]);let y=async a=>{if(a.preventDefault(),q(!0),u(null),!g||!v.start||!v.end){u("Preencha todos os campos."),q(!1);return}let b={manicure_id:g.id,day_of_week:v.day,start_time:`${v.start}:00`,end_time:`${v.end}:00`};try{let{error:a}=await e.supabase.from("schedules").insert([b]);if(a){if("23505"===a.code)throw Error("Você já tem um horário cadastrado para este dia da semana.");throw Error(a.message)}w({day:1,start:"09:00",end:"18:00"}),x(g.id)}catch(a){u(a.message)}finally{q(!1)}},z=async a=>{if(g&&confirm("Tem certeza que deseja excluir este horário?")){q(!0),u(null);try{let{error:b}=await e.supabase.from("schedules").delete().eq("id",a);if(b)throw Error(b.message);x(g.id)}catch(a){u(a.message)}finally{q(!1)}}};return n||!g?(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,b.jsx)(f.Loader2,{className:"w-8 h-8 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Carregando horários..."})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-100 font-inter",children:[(0,b.jsx)(t,{user:{name:"Dona Maria",avatarUrl:"https://placehold.co/100x100/E62E7A/FFFFFF?text=M"}}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto py-6 sm:py-10 px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,b.jsx)(h.Clock,{className:"w-7 h-7 mr-3 text-mani-pink-600"}),"Agenda Fixa Semanal"]}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mt-1",children:"Defina seus dias e horários de trabalho para que seus clientes possam agendar."})]}),s&&(0,b.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded-lg mb-6 text-sm",children:s}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 mb-8",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,b.jsx)(i.Plus,{className:"w-5 h-5 mr-2"}),"Adicionar Novo Bloco"]}),(0,b.jsxs)("form",{onSubmit:y,className:"grid grid-cols-2 md:grid-cols-4 gap-4 items-end",children:[(0,b.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[(0,b.jsx)("label",{htmlFor:"day",className:"block text-sm font-medium text-gray-700",children:"Dia"}),(0,b.jsx)("select",{id:"day",value:v.day,onChange:a=>w({...v,day:Number(a.target.value)}),className:"mt-1 w-full py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:ring-mani-pink-500 focus:border-mani-pink-500",children:r.map((a,c)=>(0,b.jsx)("option",{value:c,children:a},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"start",className:"block text-sm font-medium text-gray-700",children:"Início"}),(0,b.jsx)("input",{type:"time",id:"start",value:v.start,onChange:a=>w({...v,start:a.target.value}),required:!0,className:"mt-1 w-full py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:ring-mani-pink-500 focus:border-mani-pink-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"end",className:"block text-sm font-medium text-gray-700",children:"Fim"}),(0,b.jsx)("input",{type:"time",id:"end",value:v.end,onChange:a=>w({...v,end:a.target.value}),required:!0,className:"mt-1 w-full py-2 px-3 border border-gray-300 rounded-lg shadow-sm focus:ring-mani-pink-500 focus:border-mani-pink-500"})]}),(0,b.jsx)("div",{className:"col-span-2 md:col-span-1",children:(0,b.jsx)("button",{type:"submit",disabled:p,className:"w-full py-2 px-4 bg-mani-pink-600 text-white font-semibold rounded-lg shadow-md hover:bg-mani-pink-700 transition disabled:opacity-50 flex items-center justify-center",children:p?(0,b.jsx)(f.Loader2,{className:"w-5 h-5 animate-spin"}):"Salvar"})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Horários Fixos Cadastrados"}),0===l.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nenhum horário cadastrado. Comece adicionando um!"}):(0,b.jsx)("ul",{className:"divide-y divide-gray-100",children:l.map(a=>(0,b.jsxs)("li",{className:"py-3 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"font-bold text-gray-900 w-24 flex-shrink-0",children:r[a.day_of_week]}),(0,b.jsxs)("div",{className:"text-gray-600",children:[a.start_time.substring(0,5)," até ",a.end_time.substring(0,5)]})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{onClick:()=>z(a.id),disabled:p,className:"text-red-500 hover:text-red-700 disabled:text-gray-400 p-2 transition",title:"Excluir Horário",children:(0,b.jsx)(j,{className:"w-5 h-5"})})})]},a.id))})]})]})]})}function t({user:a}){let f=(0,d.useRouter)(),[i,j]=(0,c.useState)(!1),[r,s]=(0,c.useState)(a.name),t=async()=>{let{error:a}=await e.supabase.auth.signOut();a||f.replace("/")};return(0,c.useEffect)(()=>{!async function(){let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return;let{data:b}=await e.supabase.from("profiles").select("name").eq("id",a.id).single();b&&s(b.name)}()},[]),(0,b.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-mani-pink-600",children:"ManiHelp"}),(0,b.jsxs)("nav",{className:"hidden md:flex space-x-6",children:[(0,b.jsxs)("a",{href:"/dashboard",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(g.Calendar,{className:"inline-block w-5 h-5 mr-1"}),"Agenda"]}),(0,b.jsxs)("a",{href:"/clients",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(k.Users,{className:"inline-block w-5 h-5 mr-1"}),"Clientes"]}),(0,b.jsxs)("a",{href:"/schedules",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(h.Clock,{className:"inline-block w-5 h-5 mr-1"}),"Horários"]}),(0,b.jsxs)("a",{href:"#",className:"font-medium px-1 py-2 text-sm transition text-gray-400 cursor-not-allowed",title:"Recurso em desenvolvimento",children:[(0,b.jsx)(n.BarChart3,{className:"inline-block w-5 h-5 mr-1"}),(0,b.jsx)(q.Lock,{className:"inline-block w-4 h-4 mr-1"}),"Relatórios"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("button",{className:"text-gray-400 hover:text-gray-500 rounded-full p-1 relative",children:[(0,b.jsx)(p.Bell,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-mani-pink-500 ring-2 ring-white"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>j(!i),className:"flex items-center space-x-2 rounded-full p-1 pr-2 hover:bg-gray-100",children:[(0,b.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-gray-700",children:r}),(0,b.jsx)(m.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${i?"rotate-180":""}`})]}),i&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 ring-1 ring-black ring-opacity-5 z-20",children:[(0,b.jsxs)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsx)(o.Settings,{className:"inline-block w-4 h-4 mr-2"}),"Configurações"]}),(0,b.jsxs)("button",{onClick:t,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,b.jsx)(l.LogOut,{className:"inline-block w-4 h-4 mr-2"}),"Sair"]})]})]})]})]})})})}a.s(["default",()=>s],4707)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__39123a0d._.js.map