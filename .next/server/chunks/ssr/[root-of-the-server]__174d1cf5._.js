module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},96902,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(7291),f=a.i(41710),g=a.i(33441);let h=(0,a.i(70106).default)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var i=a.i(41675),j=a.i(26017);let k={pending:{label:"Pendente",color:"yellow",icon:f.Clock},confirmed:{label:"Confirmado",color:"green",icon:g.Check},cancelled:{label:"Cancelado",color:"red",icon:h},completed:{label:"Concluído",color:"gray",icon:i.Calendar}};function l({clientId:a}){let[d,g]=(0,c.useState)([]),[h,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),q=(0,c.useCallback)(async()=>{l(!0),n(null);try{let{data:b,error:c}=await e.supabase.from("appointments").select(`
                    id, start_time, end_time, status,
                    service_id (id, name, price)
                `).eq("client_id",a).order("start_time",{ascending:!0});if(c)throw Error(c.message);g(b)}catch(a){console.error("Erro ao buscar agendamentos:",a),n(`Falha ao buscar agendamentos. Detalhe: ${a.message}`)}finally{l(!1)}},[a]),r=async a=>{p(a),n(null);try{let{error:b}=await e.supabase.from("appointments").update({status:"cancelled"}).eq("id",a).select();if(b)throw Error(b.message)}catch(a){console.error("Erro ao cancelar agendamento:",a),n(`Falha ao cancelar o agendamento. Tente novamente. Detalhe: ${a.message}`)}finally{p(null)}};return((0,c.useEffect)(()=>{q();let b=e.supabase.channel(`client_appointments_${a}`).on("postgres_changes",{event:"*",schema:"public",table:"appointments",filter:`client_id=eq.${a}`},()=>{q()}).subscribe();return()=>{e.supabase.removeChannel(b)}},[a,q]),h)?(0,b.jsxs)("div",{className:"flex items-center justify-center py-10",children:[(0,b.jsx)(j.Loader2,{className:"w-6 h-6 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Buscando seus agendamentos..."})]}):m?(0,b.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",role:"alert",children:[(0,b.jsx)("p",{className:"font-bold",children:"Erro de Dados"}),(0,b.jsx)("p",{children:m})]}):0===d.length?(0,b.jsxs)("div",{className:"text-center py-10",children:[(0,b.jsx)(i.Calendar,{className:"w-10 h-10 text-gray-400 mx-auto"}),(0,b.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Você não tem agendamentos"}),(0,b.jsx)("p",{className:"mt-1 text-gray-500",children:'Clique em "Agendar Novo Serviço" para começar.'})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800 border-b pb-2",children:"Seus Compromissos"}),(0,b.jsx)("ul",{className:"divide-y divide-gray-100",children:d.map(a=>{let c=new Date(a.start_time),d=c.toLocaleDateString("pt-BR",{day:"2-digit",month:"long"}),e=c.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),g=k[a.status]||k.pending,h=g.icon,i="confirmed"===a.status||"pending"===a.status,l=o===a.id;return(0,b.jsxs)("li",{className:"py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center hover:bg-gray-50 transition duration-150 rounded-md px-2",children:[(0,b.jsxs)("div",{className:"space-y-1 sm:space-y-0 sm:flex sm:items-center sm:space-x-4",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[(0,b.jsx)(f.Clock,{className:"w-4 h-4 mr-2 text-mani-pink-500"}),d," às ",e]}),(0,b.jsxs)("div",{className:"text-gray-600 text-sm sm:pl-0 pl-6",children:["Serviço: ",(0,b.jsxs)("span",{className:"font-medium",children:[a.service_id&&a.service_id[0]?.name?a.service_id[0].name:"Serviço não encontrado"," (",a.service_id&&a.service_id[0]?.price?`R$ ${parseFloat(String(a.service_id[0].price)).toFixed(2)}`:"N/A",")"]})]})]}),(0,b.jsxs)("div",{className:"mt-3 sm:mt-0 flex items-center space-x-3",children:[(0,b.jsxs)("span",{className:`flex items-center text-xs font-medium text-${g.color}-600 bg-${g.color}-100 px-3 py-1 rounded-full`,children:[(0,b.jsx)(h,{className:"w-3 h-3 mr-1"}),g.label]}),i&&(0,b.jsx)("button",{onClick:()=>r(a.id),disabled:l,className:"text-sm font-medium text-red-600 hover:text-red-800 disabled:text-gray-400 flex items-center",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 mr-1 animate-spin"}),"..."]}):"Cancelar"})]})]},a.id)})}),(0,b.jsxs)("p",{className:"text-center pt-4 text-sm text-gray-500 border-t mt-4",children:["Você tem ",d.length," agendamentos no total."]})]})}var m=a.i(49370),n=a.i(20005),o=a.i(21161);let p="Dona Maria";function q({profile:a}){let c=(0,d.useRouter)(),f=async()=>{let{error:a}=await e.supabase.auth.signOut();a||c.replace("/")};return(0,b.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-mani-pink-600",children:"ManiHelp"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("div",{className:"hidden sm:block text-sm text-gray-600",children:["Manicure: ",(0,b.jsx)("span",{className:"font-semibold",children:a?.manicureName||p})]}),(0,b.jsxs)("button",{onClick:f,className:"flex items-center space-x-2 text-sm font-medium text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition",children:[(0,b.jsx)(n.LogOut,{className:"w-4 h-4"}),"Sair"]})]})]})})})}function r(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(null),[h,k]=(0,c.useState)(!0),[n,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null);return((0,c.useEffect)(()=>{!async function(){let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.replace("/");let{data:c,error:d}=await e.supabase.from("profiles").select("id, name, role").eq("id",b.id).single();if(d||c?.role!=="client"){await e.supabase.auth.signOut(),a.replace("/");return}g({id:c.id,name:c.name,email:b.email||"",manicureName:p}),k(!1)}();let{data:{subscription:b}}=e.supabase.auth.onAuthStateChange(b=>{"SIGNED_OUT"===b&&a.replace("/")});return()=>b.unsubscribe()},[a]),h||!f)?(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,b.jsx)(j.Loader2,{className:"w-8 h-8 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Verificando sua conta..."})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-100 font-inter",children:[(0,b.jsx)(q,{profile:f}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"text-center mb-10 space-y-2",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Olá, ",f.name,"!"]}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Gerencie seus agendamentos com facilidade."})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 md:p-8 space-y-6",children:[(0,b.jsx)("div",{className:"border-b border-gray-100 pb-6",children:(0,b.jsxs)("button",{onClick:()=>r(!0),className:"w-full flex items-center justify-center bg-mani-pink-600 text-white font-semibold px-6 py-3 rounded-lg shadow-md hover:bg-mani-pink-700 transition",children:[(0,b.jsx)(i.Calendar,{className:"w-5 h-5 mr-2"}),"Agendar Novo Serviço"]})}),(0,b.jsx)(l,{clientId:f.id})]}),(0,b.jsx)("div",{className:"mt-8 text-center",children:(0,b.jsxs)("a",{href:"#",className:"text-sm font-medium text-gray-500 hover:text-mani-pink-600 flex items-center justify-center",children:[(0,b.jsx)(o.Settings,{className:"w-4 h-4 mr-2"}),"Gerenciar Perfil e Contato"]})})]}),f.id&&(0,b.jsx)(m.default,{isOpen:n,onClose:()=>r(!1),manicureId:f.id,onAppointmentCreated:()=>{r(!1)}})]})}a.s(["default",()=>r],96902)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__174d1cf5._.js.map