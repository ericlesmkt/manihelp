module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},80208,a=>{"use strict";let b=(0,a.i(70106).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],80208)},55225,23312,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>c],55225);let d=(0,b.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>d],23312)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);a.s(["Calendar",()=>b],41675)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},5784,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},41961,a=>{"use strict";let b=(0,a.i(70106).default)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);a.s(["Briefcase",()=>b],41961)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},90166,99464,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>c],90166);let d=(0,b.default)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>d],99464)},46842,63519,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>c],46842);let d=(0,b.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>d],63519)},27999,a=>{"use strict";let b=(0,a.i(70106).default)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);a.s(["CalendarCheck",()=>b],27999)},33441,49370,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441);var c=a.i(87924),d=a.i(72131),e=a.i(33508),f=a.i(27999),g=a.i(41710),h=a.i(46842),i=a.i(41961),j=a.i(63519),k=a.i(26017),l=a.i(60246),m=a.i(5784),n=a.i(7291);let o={client_id:"",service_id:"",start_time:"",manicure_id:"",newClientName:"",newClientPhone:""};function p({isOpen:a,onClose:b,manicureId:p,onAppointmentCreated:q}){let[r,s]=(0,d.useState)({...o,manicure_id:p}),[t,u]=(0,d.useState)([]),[v,w]=(0,d.useState)([]),[x,y]=(0,d.useState)("existing"),[z,A]=(0,d.useState)(!1),[B,C]=(0,d.useState)(null),[D,E]=(0,d.useState)(!1),F=(0,d.useCallback)(async()=>{A(!0),C(null);try{let{data:a,error:b}=await n.supabase.from("profiles").select("id, name").eq("role","client").order("name",{ascending:!0}),{data:c,error:d}=await n.supabase.from("services").select("id, name, price, duration_minutes").eq("manicure_id",p);if(b||d)throw Error(b?.message||d?.message);u(a||[]),w(c||[])}catch(a){console.error("Erro ao carregar dados:",a),C("Falha ao carregar clientes ou serviços.")}finally{A(!1)}},[p]);(0,d.useEffect)(()=>{a&&(F(),y("existing"),s({...o,manicure_id:p}))},[a,F,p]);let G=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c}))},H=async a=>{a.preventDefault(),E(!0),C(null);let c={manicure_id:r.manicure_id,status:"pending"};try{if(!r.start_time||!r.service_id){C("Serviço e Data/Hora são obrigatórios."),E(!1);return}let a=Number(r.service_id),d=v.find(b=>b.id===a);if(!d)throw Error("Serviço inválido.");let e=new Date(r.start_time),f=new Date(e.getTime()+6e4*d.duration_minutes);if(c={...c,service_id:a,start_time:e.toISOString(),end_time:f.toISOString()},"new"===x){if(!r.newClientName||!r.newClientPhone){C("Nome e Telefone são obrigatórios para novos clientes."),E(!1);return}let a=r.newClientPhone.replace(/\D/g,"");if(11!==a.length){C("O Telefone deve ter 11 dígitos (DDD + 9 dígitos)."),E(!1);return}c={...c,client_id:null,guest_name:r.newClientName,guest_phone:a}}else{if(!r.client_id){C("Selecione um cliente existente."),E(!1);return}c={...c,client_id:r.client_id,guest_name:null,guest_phone:null}}let{error:g}=await n.supabase.from("appointments").insert([c]);if(g)throw Error(g.message);q(),b()}catch(a){console.error("Erro ao salvar agendamento:",a),C(`Falha ao salvar. Detalhe: ${a.message}`)}finally{E(!1)}};return a?(0,c.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-[100] transition-opacity duration-300",children:(0,c.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 transform transition-all duration-300 scale-100",children:[(0,c.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,c.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,c.jsx)(f.CalendarCheck,{className:"w-6 h-6 mr-2 text-mani-pink-600"}),"Novo Agendamento"]}),(0,c.jsx)("button",{onClick:b,className:"p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition",children:(0,c.jsx)(e.X,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:H,className:"p-6 space-y-6",children:[B&&(0,c.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded-md text-sm",role:"alert",children:(0,c.jsx)("p",{children:B})}),(0,c.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center mb-1",children:[(0,c.jsx)(l.Users,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Opções de Cliente"]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsx)("button",{type:"button",onClick:()=>y("existing"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition ${"existing"===x?"bg-mani-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cliente Existente"}),(0,c.jsx)("button",{type:"button",onClick:()=>y("new"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition ${"new"===x?"bg-mani-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Novo Cliente (Convidado)"})]})]}),"existing"===x&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"client_id",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,c.jsx)(h.User,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Selecionar Cliente"]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("select",{id:"client_id",name:"client_id",value:r.client_id,onChange:G,disabled:z||D,className:"mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm rounded-lg shadow-sm appearance-none cursor-pointer",children:[(0,c.jsx)("option",{value:"",disabled:!0,children:"Selecione um cliente..."}),z?(0,c.jsx)("option",{disabled:!0,children:"Carregando clientes..."}):t.map(a=>(0,c.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,c.jsx)(m.ChevronDown,{className:"w-4 h-4 text-gray-400"})})]})]}),"new"===x&&(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"newClientName",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,c.jsx)(h.User,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Nome do Cliente (Convidado)"]}),(0,c.jsx)("input",{type:"text",id:"newClientName",name:"newClientName",value:r.newClientName,onChange:G,placeholder:"Nome completo do novo cliente",className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"newClientPhone",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,c.jsx)(j.Phone,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Telefone / WhatsApp"]}),(0,c.jsx)("input",{type:"tel",id:"newClientPhone",name:"newClientPhone",value:r.newClientPhone,onChange:a=>{var b;let c=(b=a.target.value)?((b=b.replace(/\D/g,"")).length>11&&(b=b.substring(0,11)),b=(b=b.replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d{5})(\d)/,"$1-$2")):"";s(a=>({...a,newClientPhone:c}))},maxLength:15,placeholder:"(99) 99999-9999",className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm",required:!0})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"service_id",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,c.jsx)(i.Briefcase,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Serviço"]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("select",{id:"service_id",name:"service_id",value:r.service_id,onChange:G,disabled:z||D,className:"mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm rounded-lg shadow-sm appearance-none cursor-pointer",children:[(0,c.jsx)("option",{value:"",disabled:!0,children:"Selecione um serviço..."}),z?(0,c.jsx)("option",{disabled:!0,children:"Carregando serviços..."}):v.map(a=>(0,c.jsx)("option",{value:String(a.id),children:a.name},a.id))]}),(0,c.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,c.jsx)(m.ChevronDown,{className:"w-4 h-4 text-gray-400"})})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,c.jsx)(g.Clock,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Data e Hora"]}),(0,c.jsx)("input",{type:"datetime-local",id:"start_time",name:"start_time",value:r.start_time,onChange:G,disabled:D,required:!0,className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm"})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[(0,c.jsx)("button",{type:"button",onClick:b,disabled:D,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition",children:"Cancelar"}),(0,c.jsx)("button",{type:"submit",disabled:D||z,className:"px-5 py-2.5 text-sm font-medium text-white bg-mani-pink-600 rounded-lg shadow-md hover:bg-mani-pink-700 transition flex items-center justify-center",children:D?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(k.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Confirmar Agendamento"})]})]})]})}):null}a.s(["default",()=>p],49370)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1a8c228c._.js.map