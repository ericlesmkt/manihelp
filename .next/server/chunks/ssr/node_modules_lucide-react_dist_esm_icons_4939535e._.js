module.exports=[46842,63519,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>c],46842);let d=(0,b.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>d],63519)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);a.s(["Calendar",()=>b],41675)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},27999,a=>{"use strict";let b=(0,a.i(70106).default)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);a.s(["CalendarCheck",()=>b],27999)},33441,49370,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>c],33441);var d=a.i(87924),e=a.i(72131);let f=(0,b.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var g=a.i(27999),h=a.i(41710),i=a.i(46842);let j=(0,b.default)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);var k=a.i(63519),l=a.i(26017),m=a.i(60246),n=a.i(7291);let o={client_id:"",service_id:"",start_time:"",manicure_id:"",newClientName:"",newClientPhone:""};function p({isOpen:a,onClose:b,manicureId:c,onAppointmentCreated:p}){let[r,s]=(0,e.useState)({...o,manicure_id:c}),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)([]),[x,y]=(0,e.useState)("existing"),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(null),[D,E]=(0,e.useState)(!1),F=(0,e.useCallback)(async()=>{A(!0),C(null);try{let{data:a,error:b}=await n.supabase.from("profiles").select("id, name").eq("role","client").order("name",{ascending:!0}),{data:d,error:e}=await n.supabase.from("services").select("id, name, price, duration_minutes").eq("manicure_id",c);if(b||e)throw Error(b?.message||e?.message);u(a||[]),w(d||[])}catch(a){console.error("Erro ao carregar dados:",a),C("Falha ao carregar clientes ou serviços. Verifique a conexão com o Supabase e RLS.")}finally{A(!1)}},[c]),G=async(a,b)=>{let c=crypto.randomUUID(),{data:d,error:e}=await n.supabase.from("profiles").insert({id:c,name:a,phone_number:b,role:"client"}).select("id").single();if(e)throw Error(`Falha ao criar novo cliente: ${e.message}`);return d.id};(0,e.useEffect)(()=>{a&&(F(),y("existing"),s({...o,manicure_id:c}))},[a,F,c]);let H=a=>{let{name:b,value:c}=a.target;s(a=>({...a,[b]:c}))},I=async a=>{a.preventDefault(),E(!0),C(null);let c=r.client_id;try{if("new"===x){if(!r.newClientName||!r.newClientPhone){C("Nome e Telefone são obrigatórios para novos clientes."),E(!1);return}c=await G(r.newClientName,r.newClientPhone)}if(!c||!r.service_id||!r.start_time){C("Por favor, preencha todos os campos obrigatórios."),E(!1);return}let a=Number(r.service_id),d=v.find(b=>b.id===a);if(!d||isNaN(a)){C("Serviço inválido ou não selecionado."),E(!1);return}let e=new Date(r.start_time),f=new Date(e.getTime()+6e4*d.duration_minutes),g={client_id:c,manicure_id:r.manicure_id,service_id:a,start_time:e.toISOString(),end_time:f.toISOString(),status:"pending"},{error:h}=await n.supabase.from("appointments").insert([g]);if(h)throw Error(h.message);p(),b()}catch(a){console.error("Erro ao salvar agendamento:",a),C(`Falha ao salvar. Detalhe: ${a.message}`)}finally{E(!1)}};return a?(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 transform transition-all duration-300 scale-100",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,d.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,d.jsx)(g.CalendarCheck,{className:"w-6 h-6 mr-2 text-mani-pink-600"}),"Novo Agendamento"]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition",children:(0,d.jsx)(f,{className:"w-6 h-6"})})]}),(0,d.jsxs)("form",{onSubmit:I,className:"p-6 space-y-6",children:[B&&(0,d.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 rounded-md text-sm",role:"alert",children:(0,d.jsx)("p",{children:B})}),(0,d.jsxs)("div",{className:"space-y-3 border-b border-gray-200 pb-4",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 flex items-center mb-1",children:[(0,d.jsx)(m.Users,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Opções de Cliente"]}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>y("existing"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition ${"existing"===x?"bg-mani-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cliente Existente"}),(0,d.jsx)("button",{type:"button",onClick:()=>y("new"),className:`flex-1 px-4 py-2 text-sm font-semibold rounded-lg transition ${"new"===x?"bg-mani-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Novo Cliente"})]})]}),"existing"===x&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"client_id",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,d.jsx)(i.User,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Selecionar Cliente"]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("select",{id:"client_id",name:"client_id",value:r.client_id,onChange:H,disabled:z||D,className:"mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm rounded-lg shadow-sm appearance-none cursor-pointer",children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Selecione um cliente..."}),z?(0,d.jsx)("option",{disabled:!0,children:"Carregando clientes..."}):t.map(a=>(0,d.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,d.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,d.jsx)(q,{className:"w-4 h-4 text-gray-400"})})]})]}),"new"===x&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"newClientName",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,d.jsx)(i.User,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Nome do Cliente"]}),(0,d.jsx)("input",{type:"text",id:"newClientName",name:"newClientName",value:r.newClientName,onChange:H,placeholder:"Nome completo do novo cliente",className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"newClientPhone",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,d.jsx)(k.Phone,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Telefone / WhatsApp"]}),(0,d.jsx)("input",{type:"tel",id:"newClientPhone",name:"newClientPhone",value:r.newClientPhone,onChange:H,placeholder:"(99) 99999-9999",className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm",required:!0})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"service_id",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,d.jsx)(j,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Serviço"]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("select",{id:"service_id",name:"service_id",value:r.service_id,onChange:H,disabled:z||D,className:"mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm rounded-lg shadow-sm appearance-none cursor-pointer",children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Selecione um serviço..."}),z?(0,d.jsx)("option",{disabled:!0,children:"Carregando serviços..."}):v.map(a=>(0,d.jsxs)("option",{value:String(a.id),children:[a.name," (R$ ",a.price.toFixed(2)," / ",a.duration_minutes," min)"]},a.id))]}),(0,d.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,d.jsx)(q,{className:"w-4 h-4 text-gray-400"})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,d.jsx)(h.Clock,{className:"w-4 h-4 mr-1 text-mani-pink-600"}),"Data e Hora"]}),(0,d.jsx)("input",{type:"datetime-local",id:"start_time",name:"start_time",value:r.start_time,onChange:H,disabled:D,required:!0,className:"mt-1 block w-full py-3 px-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-mani-pink-500 focus:border-mani-pink-500 sm:text-sm"})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[(0,d.jsx)("button",{type:"button",onClick:b,disabled:D,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition",children:"Cancelar"}),(0,d.jsx)("button",{type:"submit",disabled:D||z,className:"px-5 py-2.5 text-sm font-medium text-white bg-mani-pink-600 rounded-lg shadow-md hover:bg-mani-pink-700 transition flex items-center justify-center",children:D?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Confirmar Agendamento"})]})]})]})}):null}function q(a){return(0,d.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...a,children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}a.s(["default",()=>p],49370)}];

//# sourceMappingURL=node_modules_lucide-react_dist_esm_icons_4939535e._.js.map