module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},41675,60246,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);a.s(["Calendar",()=>c],41675);let d=(0,b.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>d],60246)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},80208,a=>{"use strict";let b=(0,a.i(70106).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],80208)},5784,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],5784)},55225,23312,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>c],55225);let d=(0,b.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>d],23312)},59102,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(7291),f=a.i(46842);let g=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var h=a.i(63519),i=a.i(41675),j=a.i(26017),k=a.i(80208);function l({manicureId:a}){let[d,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),s=(0,c.useCallback)(async()=>{p(!0),r(null);try{let a=e.supabase.from("profiles").select("id, name, phone_number, role").eq("role","client").order("name",{ascending:!0});m&&(a=a.ilike("name",`%${m}%`));let{data:b,error:c}=await a;if(c)throw Error(c.message);let d=(b||[]).map(a=>({id:a.id,name:a.name,phone_number:a.phone_number,total_appointments:0,last_service_date:null}));l(d)}catch(a){console.error("Erro ao buscar clientes:",a),r(`Falha ao buscar clientes. Detalhe: ${a.message}`)}finally{p(!1)}},[m]);(0,c.useEffect)(()=>{s()},[s]);let t=d.filter(a=>a.phone_number.includes(m)||a.name.toLowerCase().includes(m.toLowerCase()));return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Buscar por Nome ou Telefone...",value:m,onChange:a=>n(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-mani-pink-500 focus:border-mani-pink-500 shadow-sm"})]}),q&&(0,b.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",role:"alert",children:(0,b.jsx)("p",{children:q})}),o?(0,b.jsxs)("div",{className:"flex items-center justify-center py-10",children:[(0,b.jsx)(j.Loader2,{className:"w-6 h-6 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Buscando clientes..."})]}):0===t.length?(0,b.jsxs)("div",{className:"text-center py-10",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-10 h-10 text-gray-400 mx-auto"}),(0,b.jsx)("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Nenhum Cliente Encontrado"}),(0,b.jsx)("p",{className:"mt-1 text-gray-500",children:"Verifique o termo de busca ou crie um novo agendamento."})]}):(0,b.jsx)("ul",{className:"divide-y divide-gray-100",children:t.map(a=>(0,b.jsxs)("li",{className:"py-4 flex items-center justify-between hover:bg-gray-50 transition duration-150 rounded-md px-2 cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(f.User,{className:"w-6 h-6 text-mani-pink-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-md font-semibold text-gray-900",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,b.jsx)(h.Phone,{className:"w-3 h-3 mr-1"}),a.phone_number]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end text-sm",children:[(0,b.jsxs)("p",{className:"text-gray-700 font-medium",children:["Total de Agendamentos: ",a.total_appointments]}),(0,b.jsxs)("p",{className:"text-gray-500 flex items-center",children:[(0,b.jsx)(i.Calendar,{className:"w-3 h-3 mr-1"}),"Último Serviço: ",a.last_service_date||"N/A"]})]})]},a.id))})]})}var m=a.i(60246),n=a.i(20005),o=a.i(5784),p=a.i(55225),q=a.i(21161),r=a.i(23312);function s(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0),[k,n]=(0,c.useState)(null);return((0,c.useEffect)(()=>{!async function(){let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.replace("/");let{data:c,error:d}=await e.supabase.from("profiles").select("id, name, role").eq("id",b.id).single();if(d||c?.role!=="manicure"){await e.supabase.auth.signOut(),a.replace("/");return}g({id:c.id,name:c.name}),i(!1)}();let{data:{subscription:b}}=e.supabase.auth.onAuthStateChange(b=>{"SIGNED_OUT"===b&&a.replace("/")});return()=>b.unsubscribe()},[a]),h||!f)?(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[(0,b.jsx)(j.Loader2,{className:"w-8 h-8 text-mani-pink-600 animate-spin"}),(0,b.jsx)("p",{className:"ml-3 text-gray-600",children:"Carregando perfil..."})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-100 font-inter",children:[(0,b.jsx)(t,{user:{name:"Dona Maria",avatarUrl:"https://placehold.co/100x100/E62E7A/FFFFFF?text=M"}}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,b.jsx)(m.Users,{className:"w-7 h-7 mr-3 text-mani-pink-600"}),"Seus Clientes"]}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mt-1",children:"Gerencie a base de clientes do ManiHelp."})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,b.jsx)(l,{manicureId:f.id})})]})]})}function t({user:a}){let f=(0,d.useRouter)(),[g,h]=(0,c.useState)(!1),[j,k]=(0,c.useState)(a.name),l=async()=>{let{error:a}=await e.supabase.auth.signOut();a||f.replace("/")};return(0,c.useEffect)(()=>{!async function(){let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return;let{data:b}=await e.supabase.from("profiles").select("name").eq("id",a.id).single();b&&k(b.name)}()},[]),(0,b.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-mani-pink-600",children:"ManiHelp"}),(0,b.jsxs)("nav",{className:"hidden md:flex space-x-6",children:[(0,b.jsxs)("a",{href:"/dashboard",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(i.Calendar,{className:"inline-block w-5 h-5 mr-1"}),"Agenda"]}),(0,b.jsxs)("a",{href:"/clients",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(m.Users,{className:"inline-block w-5 h-5 mr-1"}),"Clientes"]}),(0,b.jsxs)("a",{href:"/reports",className:"font-medium px-1 py-2 text-sm transition text-gray-500 hover:text-gray-700",children:[(0,b.jsx)(p.BarChart3,{className:"inline-block w-5 h-5 mr-1"}),"Relatórios"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("button",{className:"text-gray-400 hover:text-gray-500 rounded-full p-1 relative",children:[(0,b.jsx)(r.Bell,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-mani-pink-500 ring-2 ring-white"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>h(!g),className:"flex items-center space-x-2 rounded-full p-1 pr-2 hover:bg-gray-100",children:[(0,b.jsx)("span",{className:"hidden sm:inline font-medium text-sm text-gray-700",children:j}),(0,b.jsx)(o.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${g?"rotate-180":""}`})]}),g&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 ring-1 ring-black ring-opacity-5 z-20",children:[(0,b.jsxs)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsx)(q.Settings,{className:"inline-block w-4 h-4 mr-2"}),"Configurações"]}),(0,b.jsxs)("button",{onClick:l,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,b.jsx)(n.LogOut,{className:"inline-block w-4 h-4 mr-2"}),"Sair"]})]})]})]})]})})})}a.s(["default",()=>s],59102)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e459cfa1._.js.map